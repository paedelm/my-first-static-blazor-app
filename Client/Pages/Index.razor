@page "/"
// @using EnvironmentNS
@using BlazorApp.Client.Services
@inject MyEnvironment Env
<PageTitle>Index</PageTitle>

<h1>Haiiii---- @situation, Environment: @Env.HostEnvironment?.Environment on @Env.HostEnvironment?.BaseAddress</h1>

Welcome to your new app.
<AuthorizeView>
    <Authorized>
        <TestFunc Naam="Peter Edelman"></TestFunc>
        <DynamicComponent Type="@typeof(TestFunc)" Parameters="@parameters"></DynamicComponent>
    </Authorized>
</AuthorizeView>

<SurveyPrompt Title="How is Blazor working for you?" />
<!--

@foreach (var widget in widgets)
{
    <DynamicComponent Type="@widget.Type" Parameters="@widget.Parameters"/>
}
-->
@code {
    Dictionary<string, object> parameters = new() { ["naam"] = "Rutger" };
    private string situation = "Cloud";
    /*
        private readonly List<Widget> widgets = new()
        {
            new Widget { Type = typeof(FetchData) },
            new Widget
            {
            Type = typeof(Greeting),
            Parameters = new Dictionary<string, object>
            {
        ["Name"] = "Jon"
    }
    }
    };
    */
    protected override async Task OnInitializedAsync()
    {
        situation = Env.HostEnvironment?.Environment == "Development" ? "Local" : "Cloud";
        await Task.Delay(0);
    }
}
